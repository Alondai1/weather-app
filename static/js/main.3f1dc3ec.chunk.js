(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{193:function(e,t,a){},226:function(e,t,a){e.exports=a(417)},231:function(e,t,a){},234:function(e,t,a){},235:function(e,t,a){},270:function(e,t,a){},386:function(e,t,a){},388:function(e,t,a){},389:function(e,t,a){},413:function(e,t,a){},414:function(e,t,a){},415:function(e,t,a){},417:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(23),i=a.n(c),o=(a(231),a(26)),s=a(27),u=a(31),l=a(28),p=a(32),h=(a(232),a(47)),f=(a(233),a(234),a(41)),m=a(50);a(235);var v=function(){return r.a.createElement("div",{className:"header"},r.a.createElement(f.c,{to:"/"},r.a.createElement("img",{src:"https://herolo.co.il/assets/img/navbar/logo.png",className:"brand brand-logo left",alt:""})),r.a.createElement("ul",{className:"right"},r.a.createElement("li",null,r.a.createElement(f.c,{className:"link",to:"/favorites"},"FAVORITES")),r.a.createElement("li",null,r.a.createElement(f.c,{className:"link",to:"/"},"HOME"))))},d=a(15),y=a.n(d),E=a(37),g=a(18),C=a(49),b=a(97),O=a.n(b),T={FETCH_AUTOCOMPLETE:"FETCH_AUTOCOMPLETE",FETCH_CURRENTWEATHER:"FETCH_CURRENTWEATHER",FETCH_FORECAST:"FETCH_FORECAST",SET_CURRENTCITY:"SET_CURRENTCITY",FETCH_FAVORITES:"FETCH_FAVORITES",TOGGLE_FAVORITE:" TOGGLE_FAVORITE"},F=a(76),w=a.n(F),j={store:function(e,t){localStorage[e]=JSON.stringify(t)},load:function(e){var t=localStorage[e]||"null";return JSON.parse(t)},getUserLocation:function(){return navigator.geolocation?new Promise(function(e,t){navigator.geolocation.getCurrentPosition(e,t)}):void 0}};var x=" m9lAGyPN4SxWZAFBBSghB43DxuBB1VDj ",k={getNextDaysForecast:function(e){return I.apply(this,arguments)},getSearchResults:function(e){return R.apply(this,arguments)},getUserCity:function(){return N.apply(this,arguments)},getCityInfo:function(e){return S.apply(this,arguments)}};function I(){return(I=Object(g.a)(y.a.mark(function e(t){var a;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.get("https://dataservice.accuweather.com/forecasts/v1/daily/5day/".concat(t,"?apikey=").concat(x));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}function R(){return(R=Object(g.a)(y.a.mark(function e(t){var a;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.get("https://dataservice.accuweather.com/locations/v1/cities/autocomplete?apikey=".concat(x,"&q=").concat(t));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}function N(){return(N=Object(g.a)(y.a.mark(function e(){var t,a,n,r,c;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.getUserLocation();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:return a=t.coords.latitude,n=t.coords.longitude,e.prev=7,e.next=10,w.a.get("https://dataservice.accuweather.com/locations/v1/cities/geoposition/search?apikey=".concat(x,"&q=").concat(a,"%2C").concat(n));case 10:return r=e.sent,c={id:r.data.ParentCity.Key,description:r.data.Country.EnglishName,title:r.data.EnglishName,isFav:!1},e.abrupt("return",c);case 15:throw e.prev=15,e.t0=e.catch(7),e.t0;case 18:case"end":return e.stop()}},e,null,[[7,15]])}))).apply(this,arguments)}function S(){return(S=Object(g.a)(y.a.mark(function e(t){var a;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.get("https://dataservice.accuweather.com/currentconditions/v1/".concat(t,"?apikey=").concat(x));case 3:return a=e.sent,e.abrupt("return",a.data[0]);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}var A=function(e){return function(t){return k.getNextDaysForecast(e).then(function(e){t(function(e){return{type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",data:e}}(e,T.FETCH_FORECAST))}).catch(function(e){throw e})}},D={getFavorites:function(){var e=j.load("favorites");e||(e=_);return j.store("favorites",e),new Promise(function(t,a){t(e)})},toggleFavorite:function(e){var t=j.load("favorites");t||(t=_);var a=t.findIndex(function(t){return t.id===e.id});a<0?(e.isFav=!0,t.push(e)):t.splice(a,1);return j.store("favorites",t),new Promise(function(e,a){e(t)})}},_=[];var H=function(e){return{type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",data:e}},L=function(e){return function(t){return t(H(e,T.SET_CURRENTCITY))}},M=function(e){return function(t){return D.toggleFavorite(e).then(function(e){t(H(e,T.TOGGLE_FAVORITE))}).catch(function(e){throw e})}},V=a(425),U=(a(270),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={searchValue:"",userInput:"",results:[]},a.handleResultSelect=function(e,t){var n=t.result;a.props.setCurrentCity(n),a.setState({userInput:""})},a.handleSearchChange=function(){var e=Object(g.a)(y.a.mark(function e(t,n){var r,c,i;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.value,a.setState({userInput:r}),e.next=4,k.getSearchResults(r);case 4:(c=e.sent)&&(i=c.filter(function(e,t){return t<6}).map(function(e){return{title:e.LocalizedName,description:e.Country.LocalizedName,id:e.Key,isFav:!1}}),a.setState({results:i}));case 6:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(V.a,{placeholder:"Search...",onResultSelect:this.handleResultSelect,onSearchChange:this.handleSearchChange,results:this.state.results,value:this.state.userInput,className:"search-bar"})}}]),t}(r.a.Component)),P=(a(386),a(207)),G=a.n(P),W=a(424),B=a(215),Y=a(65),J=(a(388),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={Ftemperature:"".concat(a.props.day.Temperature.Maximum.Value," \u2109"),Ctemperature:"".concat(Math.round(5*(a.props.day.Temperature.Maximum.Value-32)/9)," \u2103")},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.day.Day.Icon,t=this.props.day.Date;return r.a.createElement("li",{className:"forecast-preview"},r.a.createElement(W.a,{className:"list-item"},r.a.createElement(B.a,{src:"https://developer.accuweather.com/sites/default/files/".concat(e<10?"0"+e:e,"-s.png"),wrapped:!0,ui:!1}),r.a.createElement(W.a.Content,null,r.a.createElement(W.a.Header,null,r.a.createElement(G.a,{format:"ddd DD/MM/YY"},t)),r.a.createElement(W.a.Meta,null,this.props.day.Day.IconPhrase),r.a.createElement(W.a.Description,null,"c"===this.props.toggleCF?this.state.Ctemperature:this.state.Ftemperature)),r.a.createElement(W.a.Content,{extra:!0},r.a.createElement("a",{href:this.props.day.Link},r.a.createElement(Y.a,{name:"question circle"}),"Read More"))))}}]),t}(r.a.Component));var q=function(e){return r.a.createElement("div",{className:"forecast-list"},r.a.createElement("ul",null,e.nextDaysForecast.DailyForecasts.map(function(t){return r.a.createElement(J,{day:t,key:t.Date,toggleCF:e.toggleCF})})))},z=a(422),K=a(423),Z=a(426),$=(a(193),a(389),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={toggleCF:"c",popupIsOpen:!1,isLoaderActive:!0},a.toggleCF=function(){a.setState(function(e){return{toggleCF:"c"===e.toggleCF?"f":"c"}})},a.handleToggleFavorite=Object(g.a)(y.a.mark(function e(){var t,n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({popupIsOpen:!0}),a.timeout=setTimeout(function(){a.setState({popupIsOpen:!1})},2e3),(t=Object(E.a)({},a.props.currentCity)).isFav=!t.isFav,n=a.props.dispatch;try{n(M(a.props.currentCity)),n(L(t))}catch(r){Object(h.b)("There is a server problem, Try again later",{})}case 6:case"end":return e.stop()}},e)})),a.setCurrentCity=function(){var e=Object(g.a)(y.a.mark(function e(t){var n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props.dispatch,e.prev=1,e.next=4,n(L(t));case 4:n(A(a.props.currentCity.id)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),Object(h.b)("There is a server problem, Try again later",{});case 10:case"end":return e.stop()}},e,null,[[1,7]])}));return function(t){return e.apply(this,arguments)}}(),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(y.a.mark(function e(){var t,a,n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.dispatch,this.props.currentCity){e.next=21;break}return e.prev=2,e.next=5,k.getUserCity();case 5:return a=e.sent,e.next=8,t(L(a));case 8:t(A(this.props.currentCity.id)),e.next=19;break;case 11:return e.prev=11,e.t0=e.catch(2),n={id:215854,description:"Israel",title:"Tel-Aviv",isFav:!1},e.next=16,t(L(n));case 16:t(A(this.props.currentCity.id)),this.setState({isLoaderActive:!1}),Object(h.b)("".concat(e.t0.message,", Try again later"),{className:"my-toest"});case 19:e.next=22;break;case 21:try{t(A(this.props.currentCity.id))}catch(r){Object(h.b)("".concat(r.message,", Try again later"),{className:"my-toest"})}case 22:case"end":return e.stop()}},e,this,[[2,11]])}));return function(){return e.apply(this,arguments)}}()},{key:"handlePopupClose",value:function(){clearTimeout(this.timeout)}},{key:"render",value:function(){return this.props.nextDaysForecast?r.a.createElement(O.a,{transitionAppear:!0,transitionAppearTimeout:600,transitionEnterTimeout:600,transitionLeaveTimeout:200,transitionName:"SlideIn"},r.a.createElement("div",{className:"home-page"},r.a.createElement(U,{setCurrentCity:this.setCurrentCity}),this.props.currentCity?r.a.createElement(K.a,{trigger:r.a.createElement(Y.a,{name:"heart".concat(this.props.currentCity.isFav?"":" outline"),className:"heart-icon"}),content:this.props.currentCity.isFav?"Added To Favorites":"Removed From Favorites",on:"click",open:this.state.popupIsOpen,onOpen:this.handleToggleFavorite,onClose:this.handlePopupClose,position:"top right"}):"",r.a.createElement("div",{className:"content-container"},r.a.createElement("h1",{className:"headline"},"".concat(this.props.nextDaysForecast.Headline.Text," in ").concat(this.props.currentCity.title)),r.a.createElement(Z.a,{onClick:this.toggleCF,basic:!0,color:"grey",content:"c"===this.state.toggleCF?"View In \u2109":"View In \u2103"}),r.a.createElement(q,{nextDaysForecast:this.props.nextDaysForecast,toggleCF:this.state.toggleCF})))):r.a.createElement(z.a,{active:this.state.isLoaderActive},"Loading")}}]),t}(n.Component)),Q=Object(C.b)(function(e){var t=e.weatherReducer,a=e.appReducer;return{nextDaysForecast:t.nextDaysForecast,currentCity:a.currentCity}})($),X=a(429),ee=a(428),te=(a(413),function(){return r.a.createElement(X.a,{placeholder:!0,className:"segment-container"},r.a.createElement(ee.a,{icon:!0},r.a.createElement(Y.a,{name:"heart",className:"segment-icon"}),"No Favorite Cities Yet"),r.a.createElement(f.b,{to:"./"},r.a.createElement(Z.a,{basic:!0,color:"teal"},"Search For Cities")))}),ae=(a(414),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={cityInfo:null},a.setCurrentCity=Object(g.a)(y.a.mark(function e(){var t;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.dispatch,e.next=3,t(L(a.props.city));case 3:a.props.history.push("/");case 4:case"end":return e.stop()}},e)})),a.toggleFavorite=Object(g.a)(y.a.mark(function e(){var t,n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=Object(E.a)({},a.props.city)).isFav=!t.isFav,n=a.props.dispatch,e.next=5,n(M(a.props.city));case 5:if(t.id!==a.props.currentCity.id){e.next=8;break}return e.next=8,n(L(t));case 8:case"end":return e.stop()}},e)})),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(y.a.mark(function e(){var t;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.getCityInfo(this.props.city.id);case 2:t=e.sent,this.setState({cityInfo:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.cityInfo&&r.a.createElement("li",{className:"favorite-preview"},r.a.createElement(W.a,{className:"list-item"},r.a.createElement(B.a,{src:"https://developer.accuweather.com/sites/default/files/".concat(this.state.cityInfo.WeatherIcon<10?"0"+this.state.cityInfo.WeatherIcon:this.state.cityInfo.WeatherIcon,"-s.png"),wrapped:!0,ui:!1}),r.a.createElement(W.a.Content,null,r.a.createElement(W.a.Meta,null,this.props.city.title),r.a.createElement(W.a.Description,null,this.state.cityInfo.WeatherText,r.a.createElement("br",null),this.state.cityInfo.Temperature.Metric.Value+"\u2103")),r.a.createElement(W.a.Content,{extra:!0},r.a.createElement(Z.a,{basic:!0,color:"teal",onClick:this.toggleFavorite,className:"remove-btn"},"Remove"),r.a.createElement(Z.a,{color:"teal",onClick:this.setCurrentCity},"See More"))))}}]),t}(r.a.Component)),ne=Object(m.e)(Object(C.b)(function(e){return{currentCity:e.appReducer.currentCity}})(ae));a(415);var re=function(e){return r.a.createElement("div",{className:"favorites-list"},r.a.createElement("ul",null,e.favorites.map(function(e){return r.a.createElement(ne,{city:e,key:e.id})})))},ce=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(y.a.mark(function e(){var t;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.dispatch,e.prev=1,e.next=4,t(function(e){return D.getFavorites().then(function(t){e(H(t,T.FETCH_FAVORITES))}).catch(function(e){throw e})});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),Object(h.b)("There is a server problem, Try again later",{});case 9:case"end":return e.stop()}},e,this,[[1,6]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(O.a,{transitionAppear:!0,transitionAppearTimeout:600,transitionEnterTimeout:600,transitionLeaveTimeout:200,transitionName:"SlideIn"},r.a.createElement("div",null,this.props.favorites.length?r.a.createElement(re,{favorites:this.props.favorites}):r.a.createElement(te,null)))}}]),t}(r.a.Component),ie=Object(C.b)(function(e){return{favorites:e.appReducer.favorites}})(ce),oe=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"app-container"},r.a.createElement(h.a,null),r.a.createElement(f.a,null,r.a.createElement(v,null),r.a.createElement(m.a,{exact:!0,path:"/",component:Q}),r.a.createElement(m.a,{path:"/favorites",component:ie})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var se=a(52);var ue=Object(se.c)({weatherReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T.FETCH_FORECAST:return Object(E.a)({},e,{nextDaysForecast:t.data});default:return e}},appReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cuurentCity:null,favorites:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T.SET_CURRENTCITY:return Object(E.a)({},e,{currentCity:t.data});case T.FETCH_FAVORITES:case T.TOGGLE_FAVORITE:return Object(E.a)({},e,{favorites:t.data});default:return e}}}),le=a(214),pe=(a(416),[le.a]);var he=Object(se.d)(ue,se.a.apply(void 0,pe));i.a.render(r.a.createElement(C.a,{store:he},r.a.createElement(oe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[226,1,2]]]);
//# sourceMappingURL=main.3f1dc3ec.chunk.js.map